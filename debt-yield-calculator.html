
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debt Yield Calculator | CRE Tool Hub</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N5TV8E0CCL"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-N5TV8E0CCL');
    </script>

    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
      .tooltip { position: relative; display: inline-block; }
      .tooltip .tooltip-text { visibility: hidden; width: 250px; background-color: #333; color: #fff; text-align: left; border-radius: 6px; padding: 8px; position: absolute; z-index: 10; bottom: 125%; left: 50%; margin-left: -125px; opacity: 0; transition: opacity 0.3s; box-shadow: 0 2px 5px rgba(0,0,0,0.2); font-size: 0.875rem; line-height: 1.25rem; font-weight: normal; }
      .tooltip:hover .tooltip-text { visibility: visible; opacity: 1; }
      .tooltip .tooltip-text::after { content: ""; position: absolute; top: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: #333 transparent transparent transparent; }
      .dropdown { visibility: hidden; opacity: 0; transition: visibility 0.1s linear, opacity 0.1s linear; }
      .group:hover .dropdown { visibility: visible; opacity: 1; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useMemo, useEffect } = React;

      // --- Shared Components ---
      const HeaderAndNav = ({ activePage }) => {
        const [isMenuOpen, setIsMenuOpen] = useState(false);
        const navLinks = [ { name: 'Home', href: 'index.html' }, { name: 'Blog', href: '#' }, { name: 'About', href: '#' } ];
        const calculatorLinks = [
            { name: 'Cap Rate Calculator', href: 'cap-rate-calculator.html' }, { name: 'NOI Builder', href: 'noi-builder.html' }, { name: 'Cash-on-Cash Calculator', href: 'cash-on-cash-calculator.html' }, { name: 'DSCR Calculator', href: 'dscr-calculator.html' }, { name: 'Loan-to-Value (LTV) Calculator', href: 'ltv-calculator.html' }, { name: 'Debt Yield Calculator', href: 'debt-yield-calculator.html' }, { name: 'Breakeven Occupancy Calculator', href: 'breakeven-occupancy-calculator.html' },
        ];
        const linkClasses = (page) => `px-3 py-2 rounded-md text-base font-medium transition-colors ${ activePage === page ? 'bg-blue-100 text-blue-700' : 'text-gray-700 hover:bg-gray-100' }`;
        return (
            <header className="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200">
                <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    {/* Desktop Header */}
                    <div className="hidden md:flex items-center justify-between h-20">
                        <div className="flex-1 flex justify-start">
                             <p className="text-sm text-gray-600">Free CRE calculators â€” client-side, no storage.</p>
                        </div>
                        <div className="flex-shrink-0 px-4">
                            <a href="index.html" className="text-3xl font-bold text-blue-600">CRE Tool Hub</a>
                        </div>
                        <div className="flex-1 flex justify-end">
                            <nav className="flex items-center space-x-1">
                                <a href="index.html" className={linkClasses('Home')}>Home</a>
                                <div className="relative group">
                                    <a href="cap-rate-calculator.html" className={`${linkClasses('Calculators')} flex items-center`}>
                                        Calculators <svg className="ml-1 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clipRule="evenodd" /></svg>
                                    </a>
                                    <div className="dropdown absolute left-0 mt-2 w-64 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10"><div className="py-1">{calculatorLinks.map(link => (<a key={link.name} href={link.href} className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">{link.name}</a>))}</div></div>
                                </div>
                                {navLinks.slice(1).map(link => <a key={link.name} href={link.href} className={linkClasses(link.name)}>{link.name}</a>)}
                            </nav>
                        </div>
                    </div>
                     {/* Mobile Header */}
                    <div className="md:hidden flex items-center justify-between h-16">
                        <div className="flex-shrink-0">
                            <a href="index.html" className="text-2xl font-bold text-blue-600">CRE Tool Hub</a>
                        </div>
                        <div className="-mr-2 flex">
                            <button onClick={() => setIsMenuOpen(!isMenuOpen)} type="button" className="bg-gray-100 inline-flex items-center justify-center p-2 rounded-md text-gray-600 focus:outline-none"><span className="sr-only">Open main menu</span>
                                {!isMenuOpen ? (<svg className="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h16" /></svg>) : (<svg className="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" /></svg>)}
                            </button>
                        </div>
                    </div>
                </div>
                {isMenuOpen && (<div className="md:hidden"><div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="index.html" className={`block ${linkClasses('Home')}`}>Home</a>
                    <div className="relative group"><a href="cap-rate-calculator.html" className={`block ${linkClasses('Calculators')}`}>Calculators</a><div className="mt-1 space-y-1 pl-4">{calculatorLinks.map(link => (<a key={link.name} href={link.href} className="block px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-100">{link.name}</a>))}</div></div>
                    {navLinks.slice(1).map(link => <a key={link.name} href={link.href} className={`block ${linkClasses(link.name)}`}>{link.name}</a>)}
                </div></div>)}
            </header>
        );
      };
      const Footer = () => (
        <footer className="bg-white border-t border-gray-200"><div className="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center text-gray-500"><p className="text-xs max-w-3xl mx-auto"><strong>Disclaimer:</strong> CRE Tool Hub provides educational calculators for informational purposes only. This is not financial, investment, or legal advice. Consult qualified professionals before making investment decisions.</p><div className="mt-4 flex justify-center space-x-4 text-xs"><a href="#" className="hover:text-gray-700">Privacy Policy</a><span>&middot;</span><a href="#" className="hover:text-gray-700">Terms of Use</a><span>&middot;</span><a href="#" className="hover:text-gray-700">Contact</a></div><p className="mt-4 text-xs">&copy; {new Date().getFullYear() + 1} CRE Tool Hub. All rights reserved.</p></div></footer>
      );
      const InfoTooltip = ({ text }) => (<span className="tooltip ml-1 text-gray-400 cursor-help"><svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg><span className="tooltip-text">{text}</span></span>);
      const AdPlaceholder = ({ widthClass, heightClass }) => (<div className={`bg-gray-100 flex items-center justify-center mx-auto rounded-md border-2 border-dashed border-gray-300 ${widthClass} ${heightClass}`}><div className="text-center"><span className="text-gray-500 text-sm block">Advertisement</span></div></div>);
      const AccordionItem = ({ question, answer }) => {
        const [isOpen, setIsOpen] = useState(false);
        return (<div className="py-4"><button onClick={() => setIsOpen(!isOpen)} className="w-full flex justify-between items-center text-left text-gray-800 focus:outline-none"><span className="font-semibold">{question}</span><svg className={`w-5 h-5 transform transition-transform duration-200 ${isOpen ? 'rotate-180' : 'rotate-0'}`} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" /></svg></button>{isOpen && (<div className="mt-3 text-gray-600 prose max-w-none"><p>{answer}</p></div>)}</div>);
      };
      
      const DebtYieldCalculator = ({ noi, setNoi, loanAmount, setLoanAmount, debtYield, handleDownloadPdf }) => {
        const [showFormula, setShowFormula] = useState(false);
        const [copyStatus, setCopyStatus] = useState(false);

        const handleShare = () => {
            const params = new URLSearchParams();
            params.set('tool', 'dy');
            params.set('noi', noi);
            params.set('loan', loanAmount);
            const newUrl = `${window.location.origin}${window.location.pathname}?${params.toString()}`;
            navigator.clipboard.writeText(newUrl).then(() => {
                setCopyStatus(true);
                setTimeout(() => setCopyStatus(false), 2000);
            });
        };

        return (
          <div className="p-4 md:p-6 bg-white border border-gray-200 rounded-lg">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 items-start">
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-600">Net Operating Income (NOI) <InfoTooltip text="Annual income after all operating expenses, excluding debt payments." /></label>
                  <input type="number" value={noi} onChange={e => setNoi(e.target.value)} className="mt-1 block w-full rounded-md border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-400 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3"/>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-600">Total Loan Amount <InfoTooltip text="Amount you're borrowing from the lender." /></label>
                  <input type="number" value={loanAmount} onChange={e => setLoanAmount(e.target.value)} className="mt-1 block w-full rounded-md border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-400 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3"/>
                </div>
              </div>
              <div className="mt-4 md:mt-0 md:ml-6 flex flex-col items-center justify-center bg-gray-50 p-6 rounded-lg shadow-inner h-full">
                <span className="text-sm font-medium text-gray-500">Debt Yield</span>
                <p className="text-4xl md:text-5xl font-bold text-blue-600 my-1">{debtYield.toFixed(2)}%</p>
                <p className="text-xs text-gray-400">Formula: (NOI / Loan Amount) x 100</p>
              </div>
            </div>
            <div className="mt-6 flex flex-col md:flex-row md:flex-wrap gap-3">
                <button onClick={handleShare} className="bg-blue-600 text-white hover:bg-blue-700 text-sm font-semibold py-2 px-4 rounded-md transition-colors flex-1">{copyStatus ? 'Link Copied!' : 'Share This Calculation'}</button>
                <button onClick={() => setShowFormula(!showFormula)} className="bg-gray-200 text-gray-700 hover:bg-gray-300 text-sm font-semibold py-2 px-4 rounded-md transition-colors flex-1">{showFormula ? 'Hide' : 'Show'} Formula</button>
                <button onClick={handleDownloadPdf} className="border border-gray-300 text-gray-700 hover:bg-gray-100 text-sm font-semibold py-2 px-4 rounded-md transition-colors w-full md:w-auto flex-grow">Download PDF Report</button>
            </div>
            {showFormula && (<div className="mt-4 bg-blue-50 border-l-4 border-blue-300 p-4 rounded-md text-sm text-gray-800"><p><strong className="font-semibold">Formula:</strong> Debt Yield = (Net Operating Income Ã· Total Loan Amount) Ã— 100</p></div>)}
          </div>
        );
      };

      // --- Page Specific Component ---
      const DebtYieldPage = () => {
        const [noi, setNoi] = useState('105000');
        const [loanAmount, setLoanAmount] = useState('1000000');
        
        useEffect(() => {
            const params = new URLSearchParams(window.location.search);
            if (params.get('noi')) setNoi(params.get('noi'));
            if (params.get('loan')) setLoanAmount(params.get('loan'));
        }, []);

        const debtYield = useMemo(() => {
          const numNoi = parseFloat(noi);
          const numLoan = parseFloat(loanAmount);
          if (isNaN(numNoi) || isNaN(numLoan) || numLoan === 0) return 0;
          return (numNoi / numLoan) * 100;
        }, [noi, loanAmount]);
        
        const getDebtYieldInterpretation = (rate) => {
            if (rate < 8) return "is below standards";
            if (rate >= 8 && rate < 10) return "barely meets requirements";
            if (rate >= 10 && rate < 12) return "is within standard range";
            if (rate >= 12) return "exceeds requirements";
            return "is within standard range";
        };
        const interpretationText = `Your ${debtYield.toFixed(2)}% debt yield ${getDebtYieldInterpretation(debtYield)} for commercial loans.`;
        const faqs = [ { question: "Why do lenders care about debt yield?", answer: "Lenders use debt yield as a simple, direct measure of risk. It tells them what their cash-on-cash return would be if they had to foreclose on the property. Unlike DSCR, it isn't affected by amortization periods or interest rates, making it a stable metric of risk regardless of loan terms." }, { question: "What's the difference between debt yield and DSCR?", answer: "Debt yield (NOI/Loan) measures risk relative to the loan amount. DSCR (NOI/Debt Service) measures cash flow ability to cover loan payments. A loan can have a good DSCR due to a low interest rate or long amortization, but still have a low, risky debt yield." }, { question: "Can I pass DSCR but fail debt yield?", answer: "Yes, this is common, especially in low-interest-rate environments. A long amortization period (e.g., 30 years) can make monthly payments small, resulting in a high DSCR, but if the loan amount is too high relative to the NOI, the debt yield can still be below the lender's minimum (often 10%)." }, { question: "How can I improve my debt yield?", answer: "You can either increase the Net Operating Income (by raising rents or cutting expenses) or decrease the total loan amount (by making a larger down payment). Both actions make the deal less risky from the lender's perspective." }, ];

        const handleDownloadPdf = () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const today = new Date().toLocaleDateString();

            doc.setFontSize(18); doc.setFont("helvetica", "bold"); doc.text("CRE Tool Hub", 105, 20, null, null, "center");
            doc.setFontSize(16); doc.setFont("helvetica", "normal"); doc.text("Debt Yield Calculator Report", 105, 30, null, null, "center");
            doc.setFontSize(10); doc.text(`Date: ${today}`, 105, 36, null, null, "center");
            doc.setLineWidth(0.5); doc.line(20, 45, 190, 45);

            doc.setFontSize(12); doc.setFont("helvetica", "bold"); doc.text("Inputs:", 20, 55);
            doc.setFont("helvetica", "normal");
            doc.text(`Net Operating Income (NOI): $${parseFloat(noi || 0).toLocaleString()}`, 20, 62);
            doc.text(`Total Loan Amount: $${parseFloat(loanAmount || 0).toLocaleString()}`, 20, 69);
            
            doc.line(20, 78, 190, 78);
            
            doc.setFont("helvetica", "bold"); doc.text("Result:", 20, 88);
            doc.setFont("helvetica", "normal");
            doc.text(`Debt Yield: ${debtYield.toFixed(2)}%`, 20, 95);
            doc.text("Formula: (NOI / Total Loan Amount) x 100", 20, 102);
            
            doc.line(20, 111, 190, 111);

            doc.setFont("helvetica", "bold"); doc.text("Interpretation:", 20, 121);
            doc.setFont("helvetica", "normal");
            const interpretationLines = doc.splitTextToSize(interpretationText, 170);
            doc.text(interpretationLines, 20, 128);
            
            doc.line(20, 260, 190, 260);
            doc.setFontSize(8); doc.setTextColor(150);
            doc.text("This calculation is for educational purposes only...", 105, 265, null, null, "center");
            doc.text("Powered by CREToolHub.com | Visit: kellycodeteam.github.io/cretoolhub", 105, 270, null, null, "center");

            doc.save("debt-yield-report.pdf");
        };

        return (
            <div className="bg-gray-50 text-gray-800 min-h-screen">
                <HeaderAndNav activePage="Calculators" />
                <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
                     <nav className="text-sm mb-4"><ol className="list-none p-0 inline-flex"><li className="flex items-center"><a href="index.html" className="text-gray-500 hover:text-blue-600">Home</a><svg className="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></li><li><span className="text-gray-700 font-medium">Debt Yield Calculator</span></li></ol></nav>

                    <h1 className="text-3xl md:text-4xl font-bold text-gray-900">Debt Yield Calculator â€” Instant</h1>
                     <div className="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2">
                           <DebtYieldCalculator noi={noi} setNoi={setNoi} loanAmount={loanAmount} setLoanAmount={setLoanAmount} debtYield={debtYield} handleDownloadPdf={handleDownloadPdf} />
                           
                           {parseFloat(loanAmount) > 0 && (
                                <div className="mt-6 bg-white p-6 rounded-lg border border-gray-200">
                                    <h3 className="text-xl font-bold text-gray-900">ðŸ“Š Lender Debt Yield Standards</h3>
                                    <div className="mt-4 space-y-2 text-gray-700">
                                        <p>{interpretationText}</p>
                                        <ul className="list-disc list-inside space-y-1 pl-2 text-sm text-gray-600">
                                            <li><strong>Below 8%:</strong> Risky - most lenders won't approve.</li>
                                            <li><strong>8-10%:</strong> Minimum acceptable - tight terms, higher scrutiny.</li>
                                            <li><strong>10-12%:</strong> Standard range - meets most lender requirements.</li>
                                            <li><strong>12%+:</strong> Strong - favorable loan terms likely.</li>
                                        </ul>
                                    </div>
                                </div>
                            )}

                           <div className="mt-6 bg-blue-50 border-l-4 border-blue-400 p-4 rounded-md">
                               <p><strong className="font-semibold text-blue-800">ðŸ’¡ Pro Tip:</strong> Debt yield became popular after 2008 because it doesn't depend on interest rates or property values. Lenders use it as a quick test: if they had to foreclose today, would the NOI justify the loan amount? Target 10%+ to pass most lenders' screens.</p>
                           </div>

                           <div className="mt-8 prose max-w-none text-gray-700 bg-white p-6 rounded-lg border border-gray-200">
                                <h2 className="text-2xl font-bold text-gray-900">What is Debt Yield?</h2>
                                <p>Debt Yield is a metric used by commercial real estate lenders to assess the risk of a loan, particularly in the CMBS (Commercial Mortgage-Backed Securities) market. It is calculated by dividing the property's Net Operating Income (NOI) by the total loan amount. The result is expressed as a percentage.</p>
                                <p>Unlike other common metrics like DSCR or LTV, debt yield is not affected by fluctuating interest rates, amortization periods, or market property values. This makes it a very stable and straightforward measure of risk from the lender's point of view. It simply answers the question: "What is our cash-on-cash return on this loan if we had to foreclose on the property on day one?" After the 2008 financial crisis, when property values plummeted and underwriting standards tightened, lenders began favoring debt yield as a more reliable risk indicator.</p>
                           </div>

                           <div className="mt-8 bg-white p-6 rounded-lg border border-gray-200">
                                <h3 className="text-2xl font-bold text-gray-900 mb-4">Frequently Asked Questions</h3>
                                <div className="space-y-3 border-t border-gray-200 divide-y divide-gray-200">
                                    {faqs.map((faq, index) => <AccordionItem key={index} question={faq.question} answer={faq.answer} />)}
                                </div>
                           </div>
                        </div>

                        <aside className="space-y-6">
                            <AdPlaceholder widthClass="w-[300px]" heightClass="h-[250px]" />
                        </aside>
                    </div>
                     <div className="mt-8"><AdPlaceholder widthClass="w-full max-w-[728px]" heightClass="h-[90px]" /></div>
                </main>
                <Footer />
            </div>
        );
      };
      
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<DebtYieldPage />);
    </script>
</body>
</html>
